<div class="filtros">
  <select [(ngModel)]="filtroCargo">
    <option value="">Todos los cargos</option>
    <option *ngFor="let cargo of cargos" [value]="cargo.id">
      {{ cargo.nombre }}
    </option>
  </select>

  <select [(ngModel)]="filtroEstado">
    <option value="">Todos los estados</option>
    <option value="postulado">Postulado</option>
    <option value="entrevista">Entrevista</option>
    <option value="evaluacion">Evaluaci√≥n</option>
    <option value="seleccionado">Seleccionado</option>
    <option value="descartado">Descartado</option>
  </select>
</div>

<table>
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Correo</th>
      <th>Cargo</th>
      <th>Estado</th>
      <th>Fecha</th>
      <th>Etiquetas</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of filtrar()">
      <td data-label="Nombre">{{ p.primer_nombre }} {{ p.apellido_paterno }}</td>
      <td data-label="Correo">{{ p.correo }}</td>
      <td data-label="Cargo">{{ p.cargo_postulado }}</td>
      <td data-label="Estado">{{ p.estado }}</td>
      <td data-label="Fecha">{{ p.fecha_postulacion | date }}</td>
      <td data-label="Etiquetas">
        <span *ngFor="let etiqueta of p.etiquetas" class="etiqueta">
          {{ etiqueta.nombre }}
        </span>
      </td>
      <td data-label="Acciones">
        <button (click)="abrirComparacion(p)">üëÅÔ∏è</button>

        <button (click)="abrirContratacion(p)">‚úÖ</button>
      </td>
    </tr>


  </tbody>
</table>
<!-- Modal de comparaci√≥n -->
<ng-container *ngIf="postulanteSeleccionado && cargoRelacionado">
  <div class="modal-overlay">
    <div class="modal-contenido">
      <button (click)="cerrarModal()">‚ùå Cerrar</button>
      <h3>{{ postulanteSeleccionado.primer_nombre }} {{ postulanteSeleccionado.apellido_paterno }}</h3>

      <h4>üîç Comparaci√≥n con el cargo</h4>

      <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 10px;">
        <div style="flex: 1;">
          <h5 style="color: green;">‚úî Coincidencias</h5>
          <ul>
            <li *ngFor="let item of compararEtiquetas().coincidencias">{{ item }}</li>
          </ul>
        </div>

        <div style="flex: 1;">
          <h5 style="color: red;">‚úò Faltantes del postulante</h5>
          <ul>
            <li *ngFor="let item of compararEtiquetas().faltantes">{{ item }}</li>
          </ul>
        </div>

        <div style="flex: 1;">
          <h5 style="color: #0d6efd;">‚ûï Extras del postulante</h5>
          <ul>
            <li *ngFor="let item of compararEtiquetas().extras">{{ item }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<!-- Modal de contrataci√≥n -->
<ng-container *ngIf="postulanteSeleccionado && !cargoRelacionado">
  <div class="modal-overlay">
    <div class="modal-contenido">
      <app-postulante-contratar [postulante]="postulanteSeleccionado"
        (cerrar)="postulanteSeleccionado = null"></app-postulante-contratar>
    </div>
  </div>
</ng-container>